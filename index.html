<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="img/favicon.png" sizes="16x16">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MC - dilk.club</title>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    body, html {
      height: 100%;
    }

    .site-background {
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center center;
      background-attachment: fixed;
      min-height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    .logo {
      margin-bottom: 10px;
    }

    .logo img {
      max-width: 200px;
      height: auto;
    }

    nav {
      margin-bottom: 15px;
    }

    .tab-button {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      padding: 10px 20px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      cursor: pointer;
      margin: 0 5px;
      border-radius: 5px;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      transition: background 0.3s ease;
    }

    .tab-button:hover {
      background: rgba(255, 255, 255, 0.25);
    }

    .tab-content {
      display: none;
      max-width: 800px;
      width: 90%;
      background: rgba(255, 255, 255, 0.2);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      margin-bottom: 20px;
      color: white;
    }

    .tab-content.active {
      display: block;
    }

    .placeholder-img {
      width: 100%;
      height: 200px;
      background-color: rgba(200, 200, 200, 0.2);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #eee;
      font-size: 18px;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-radius: 10px;
    }

    .responsive-image {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    .home-title {
      text-align: center;
    }

    @media (max-width: 600px) {
      .tab-button {
        padding: 8px 12px;
        font-size: 14px;
      }

      .logo img {
        max-width: 150px;
      }
    }

    .bottom-image-wrapper {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .hover-expand-image {
      width: 100px;
      height: auto;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border-radius: 10px;
    }

    .hover-expand-image:hover {
      transform: scale(1.1);
      cursor: pointer;
    }

    #leaderboard-content {
      text-align: center;
      font-weight: bold;
      font-size: 50px;
      font-family: 'MinecraftRegular', sans-serif;
	  text-shadow: 3px 3px gray;
    }

    @font-face {
      font-family: 'MinecraftRegular';
      src: url('fonts/MinecraftRegular-Bmg3.otf') format('opentype');
    }
	
	h3 {
      text-align: center;
	}
  </style>
</head>
<body>
  <div class="site-background">
    <div class="logo">
      <img src="img/dilk.gif" alt="Site Logo">
    </div>

    <nav>
      <button class="tab-button" onclick="showTab('tab1')">Home</button>
      <button class="tab-button" onclick="showTab('tab2')">Leaderboard</button>
      <button class="tab-button" onclick="showTab('tab3')">Game Objectives</button>
      <button class="tab-button" onclick="showTab('tab4')">Rules</button>
    </nav>

    <div id="tab1" class="tab-content active">
      <h2 class="home-title">Discord Wars by dilk.club - Season 1<br><br></h2>
      <img src="img/ip.gif" alt="Server IP" class="responsive-image">
      <p><br>Welcome to what we're hoping will be the first of many seasons of Discord Wars! We pretty much all steam through Minecraft 1-2 times a year, the goal of this server is to have all of our groups do so in one place with a dash of competition.<br><br>Each group can make their team in game and players will earn points for their team as they progress through the game at its various milestones. Team/group points will be displayed via in-game leaderboard. The specifics of what will earn how many points is still being worked out and once we have it finalized they will be added to the "Game Objectives" page.<br><br>Join the Discord using the link below to stay up to date, ask questions or give suggestions!</p>
      <div class="bottom-image-wrapper">
        <a href="https://discord.com/invite/7xfARtcPNR" target="_blank">
          <img src="img/discord.png" alt="Click Me" class="hover-expand-image">
        </a>
      </div>
    </div>

    <div id="tab2" class="tab-content">
      <h2 class="home-title">Leaderboard<br><br></h2>
      <div id="leaderboard-content">
        <p>Loading leaderboard...</p>
      </div>
	  <p><br><br>* Leaderboard updates approximately every 2 minutes</p>
    </div>

	<div id="tab3" class="tab-content">
	  <h2 class="home-title">Objectives / Quests<br><br></h2>
	  <p><br><br>Once in game you can use <code>/q</code> to open the quests menu. Inside you can see all active quests you have, your progress towards them etc. Upon completing one, you'll be credited points. When you use the TAB key to see the player list in game, you'll be able to see the number of points individuals have. Team scores are displayed on the website "Leaderboard" tab. The objectives/quests are broken down into categories:<br><br></p>

	  <h3>Mining<br><br></h3>
	  <p>Mining quests can be as simple as mine one diamond, others might require that you've mined a stack or that you've mined a variety of ore blocks.<br><br></p>

	  <h3>Crafting<br><br></h3>
	  <p>Crafting quests are rewarded for crafting various items in the game.<br><br></p>

	  <h3>Building<br><br></h3>
	  <p>Building quests will be based on placing certain blocks, certain numbers of blocks and placing certain cosmetic style blocks.<br><br></p>

	  <h3>Combat<br><br></h3>
	  <p>Combat quests will contain objectives like kill X number of mobs, kill X types of mobs, kill X number of players etc.<br><br></p>

	  <h3>Hidden<br><br></h3>
	  <p>Hidden quests will be akin to hidden achievements on Steam. You'll know what they are if you accomplish them. In the name of fairness, dilk.club members privy to their objectives are ineligible to earn them.<br><br></p>

	  <h3>Screenshot/Video<br><br></h3>
	  <p>Screenshot/Video quests require you submit a photo or video of various in-game things. An example could be "build a redstone contraption." You would submit your video/screenshot on the Discord for manual verification. Once again, in the name of fairness, any dilk.club members require other players to approve any submissions they make.<br><br></p>

	  <h3>Achievements<br><br></h3>
	  <p>Some quests will match in-game achievements, for example, killing a ghast with a fireball (Return to Sender).</p>
	</div>


    <div id="tab4" class="tab-content">
      <h2>Rules</h2>
      <p><br>We're adults, there are no rules. But if enough players collectively deem you a fun-sucking vulture, you're probably getting yeeted.</p>
    </div>
  </div>

  <script>
    function showTab(tabId) {
      const tabs = document.querySelectorAll('.tab-content');
      tabs.forEach(tab => tab.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
    }

    const backgrounds = [
      'img/bg1.jpg',
      'img/bg2.jpg',
      'img/bg3.jpg',
      'img/bg4.jpg',
      'img/bg5.jpg',
      'img/bg6.jpg'
    ];
    const randomBg = backgrounds[Math.floor(Math.random() * backgrounds.length)];
    document.querySelector('.site-background').style.backgroundImage = `url('${randomBg}')`;

    document.addEventListener("DOMContentLoaded", function () {
      const url = "https://teamscores.dilk.club/team_balances.txt";
      const leaderboardContent = document.getElementById("leaderboard-content");

      function fetchLeaderboard() {
        fetch(url)
          .then(response => response.text())
          .then(text => {
            const lines = text.split("\n")
              .map(line => {
                const [name, score] = line.split(" - ");
                return { name, score: parseFloat(score) || 0 };
              })
              .filter(entry => entry.name && !isNaN(entry.score));

            lines.sort((a, b) => b.score - a.score);

            const formattedText = applyMinecraftColors(
              lines.map(entry => `${entry.name} - ${entry.score}`).join("\n")
            );

            leaderboardContent.innerHTML = formattedText;
          })
          .catch(error => {
            console.error("Error fetching leaderboard:", error);
            leaderboardContent.innerHTML = "<p>Failed to load leaderboard.</p>";
          });
      }

      function applyMinecraftColors(text) {
        const colorMap = {
          "0": "black", "1": "darkblue", "2": "darkgreen", "3": "darkcyan",
          "4": "darkred", "5": "purple", "6": "gold", "7": "gray",
          "8": "darkgray", "9": "blue", "a": "green", "b": "cyan",
          "c": "red", "d": "lightpurple", "e": "yellow", "f": "white"
        };

        return text.split("\n").map(line => {
          const [left, ...rightParts] = line.split("-");
          const right = rightParts.join("-");

          let result = "";
          let openTag = "";
          let i = 0;

          while (i < left.length) {
            if (left[i] === "&" && i + 1 < left.length && colorMap[left[i + 1]]) {
              if (openTag) result += "</span>";
              const color = colorMap[left[i + 1]];
              result += `<span style="color: ${color}; font-family: 'MinecraftRegular', sans-serif;">`;
              openTag = "</span>";
              i += 2;
            } else {
              result += left[i];
              i++;
            }
          }

          if (openTag) result += "</span>";

          return result + (right ? ` - ${right}` : "");
        }).join("<br>");
      }

      fetchLeaderboard();
      setInterval(fetchLeaderboard, 5000);
    });
  </script>
</body>
</html>
